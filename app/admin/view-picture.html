<!DOCTYPE html>
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--><html lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8"/>
    <title>index</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
    <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link href="assets/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
    <link href="css/style.css" rel="stylesheet" />
    <link href="css/style-responsive.css" rel="stylesheet" />
    <link href="css/style-default.css" rel="stylesheet" id="style_color" />
    <link href="css/page.css" rel="stylesheet" type="text/css"/>
</head>

<body class="fixed-top">


    <!-- begin header -->
    <div id="header" class="navbar navbar-inverse navbar-fixed-top">
       <div class="navbar-inner">
           <div class="container-fluid">



               <!--sidebar toggle-->
               <div class="sidebar-toggle-box hidden-phone">
                   <div class="icon-reorder tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
               </div>


               <!-- LOGO -->
               <a class="brand" href="index.html">
                   <h1>LOGO</h1>
               </a>

               <a class="btn btn-navbar collapsed" id="main_menu_trigger" data-toggle="collapse" data-target=".nav-collapse">
                   <span class="icon-bar"></span>
                   <span class="icon-bar"></span>
                   <span class="icon-bar"></span>
                   <span class="arrow"></span>
               </a>


               <!-- user avatar -->
               <div class="top-nav">
                   <ul class="nav pull-right top-menu" >

                       <li class="dropdown">
                           <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                              <span class="username">Jhon Doe</span>
                              <b class="caret"></b>
                              <img src="img/avatar1_small.jpg" class="logined" alt="">
                           </a>
                           <ul class="dropdown-menu extended logout">
                              <li>
                                  <a href="personal-center.html"><i class="icon-key"></i>个人中心</a>
                              </li>
                              <li>
                                  <a href="login.html"><i class="icon-key"></i>退出</a>
                              </li>
                           </ul>
                       </li>
                       <li>
                            <a href="#">
                               <img src="img/avatar.png" class="login-before" alt="">
                            </a>
                       </li>
                   </ul>
               </div>


           </div>
       </div>
    </div>
    <!-- end header -->




  <!-- BEGIN CONTAINER -->
  <div id="container" class="row-fluid">



      <!-- begin slidebar -->
      <div class="sidebar-scroll">
          <div id="sidebar" class="nav-collapse collapse">

            <ul class="sidebar-menu">

                <li class="sub-menu">
                    <a class="" href="index.html">
                        <i class="icon-dashboard"></i>
                        <span>活动列表</span>
                    </a>
                </li>

                <li class="sub-menu active">
                    <a class="" href="monitor-people.html">
                        <i class="icon-dashboard"></i>
                        <span>监测人列表</span>
                    </a>
                </li>

                <li class="sub-menu">
                    <a class="" href="pw-change.html">
                        <i class="icon-dashboard"></i>
                        <span>密码修改</span>
                    </a>
                </li>

                
            </ul>

        </div>
      </div>
      <!-- end slidebar -->






      <!-- begin 中间内容区-->  
      <div id="main-content" class="container-fluid view-picture-mc">
        
          <h3 class="page-title">图片查看</h3>

          <div class="widget-body view-picture">

              <div class="picture-info">
                  <ul>
                    <li>活动名称：<span>活动1</span></li>
                    <li>广告主：<span>耐克专卖店</span></li>
                    <li>品牌：<span>耐克</span></li>
                  </ul>
              </div>
              <div class="untreated-picture untreated" id="untreated">
                  <h4>未处理：</h4>
                  <ul class="untreated-pic-ul">
                      <li class="untreated-pic-list">
                        <div class="pic-stage-w">
                            <div class="pic-stage-on" dataType="unStage"><span class="picStage">未处理</span><i class="icon-sort-down"></i></div>
                            <ul class="pic-stage-ul">
                                <li data-stage="unStage">未处理</li>
                                <li data-stage="passStage">通过</li>
                                <li data-stage="minedStage">待定</li>
                                <li data-stage="uneffectStage">无效</li>
                            </ul>
                        </div>
                        <div class="untreated-pic">
                            <div class="untreated-pic-w">
                                <img src="img/4px.png" class="px4">
                                <img src="img/zoomFullScreen.jpg" id="01" class="img-label">
                            </div>
                            <div>
                                <p class="untreated-pic-info">李某某 <br> 2017-03-13 21:28:45</p>
                            </div>
                        </div>

                        <!-- <div class="the-pic-detail">
                          <ul>
                            <li>
                              <p>角度：<span>正面</span></p>
                            </li>
                            <li>
                              <p>监测人：<span>李某某</span></p>
                            </li>
                            <li>
                              <p>拍摄日期：<span>2017-03-21 21:28:45</span></p>
                            </li>
                            <li>
                              <p>拍摄说明：<span>拍摄时间为晚上，照片色彩受光照影响。</span></p>
                            </li>
                            <li>
                              <p>地址：<span>白云机场路136号</span></p>
                            </li>
                            <li>
                              <p>提交日期：<span>2017-03-31 22:48:45</span></p>
                            </li>
                          </ul>
                        </div> -->



                      </li>
                      <li class="untreated-pic-list">
                        <div class="pic-stage-w">
                            <div class="pic-stage-on" dataType="unStage"><span class="picStage">未处理</span><i class="icon-sort-down"></i></div>
                            <ul class="pic-stage-ul">
                                <li data-stage="unStage">未处理</li>
                                <li data-stage="passStage">通过</li>
                                <li data-stage="minedStage">待定</li>
                                <li data-stage="uneffectStage">无效</li>
                            </ul>
                        </div>
                        <div class="untreated-pic">
                            <div class="untreated-pic-w">
                                <img src="img/4px.png" class="px4">
                                <img src="img/img-list01.jpg" id="02" class="img-label">
                            </div>
                            <div>
                                <p class="untreated-pic-info">李某某 <br> 2017-03-13 21:28:45</p>
                            </div>
                        </div>
                      </li>
                  </ul>
              </div>

              <div class="untreated-picture treated"  id="treated">
                  <h4>已处理：</h4>
                  <ul class="untreated-pic-ul">
                      <li class="untreated-pic-list">
                        <div class="pic-stage-w">
                            <div class="pic-stage-on" dataType="passStage"><span class="picStage">通过</span><i class="icon-sort-down"></i></div>
                            <ul class="pic-stage-ul">
                                <li data-stage="unStage">未处理</li>
                                <li data-stage="passStage">通过</li>
                                <li data-stage="minedStage">待定</li>
                                <li data-stage="uneffectStage">无效</li>
                            </ul>
                        </div>
                        <div class="untreated-pic">
                            <div class="untreated-pic-w">
                                <img src="img/4px.png" class="px4">
                                <img src="img/zoomFullScreen.jpg" id="01" class="img-label">
                            </div>
                            <div>
                                <p class="untreated-pic-info">李某某 <br> 2017-03-13 21:28:45</p>
                            </div>
                        </div>
                      </li>
                      <li class="untreated-pic-list">
                        <div class="pic-stage-w">
                            <div class="pic-stage-on" dataType="minedStage"><span class="picStage">待定</span><i class="icon-sort-down"></i></div>
                            <ul class="pic-stage-ul">
                                <li data-stage="unStage">未处理</li>
                                <li data-stage="passStage">通过</li>
                                <li data-stage="minedStage">待定</li>
                                <li data-stage="uneffectStage">无效</li>
                            </ul>
                        </div>
                        <div class="untreated-pic">
                            <div class="untreated-pic-w">
                                <img src="img/4px.png" class="px4">
                                <img src="img/img-list01.jpg" id="04" class="img-label">
                            </div>
                            <div>
                                <p class="untreated-pic-info">李某某 <br> 2017-03-13 21:28:45</p>
                            </div>
                        </div>
                      </li>
                      <li class="untreated-pic-list">
                        <div class="pic-stage-w">
                            <div class="pic-stage-on" dataType="uneffectStage"><span class="picStage">无效</span><i class="icon-sort-down"></i></div>
                            <ul class="pic-stage-ul">
                                <li data-stage="unStage">未处理</li>
                                <li data-stage="passStage">通过</li>
                                <li data-stage="minedStage">待定</li>
                                <li data-stage="uneffectStage">无效</li>
                            </ul>
                        </div>
                        <div class="untreated-pic">
                            <div class="untreated-pic-w">
                                <img src="img/4px.png" class="px4">
                                <img src="img/zoomFullScreen.jpg" id="01" class="img-label">
                            </div>
                            <div>
                                <p class="untreated-pic-info">李某某 <br> 2017-03-13 21:28:45</p>
                            </div>
                        </div>
                      </li>
                  </ul>
                  
              </div>
              
          </div>
      </div>
      <!-- end  中间内容区-->  



  </div>
  <!-- END CONTAINER-->
  

  <div class="view-pic-mask">
    
    <div class="view-pic-w">
        <div class="view-pic-pv">

            <span class="view-pic-clons"><i class="icon-remove icon-white"></i></span>

            <span class="pvPrev" id="pvPrev"></span>

            <div class="pic-w">
                <img id="openBigImg" src="img/img-list01.jpg">
            </div>

            <span class="pvNext" id="pvNext"></span>

        </div>
        <div class="view-psmall">
            <div class="view-pic-small-w">
                <span class="pv-s-prev"></span>
                <div class="view-pic-small">
                  <div class="pv-small-scroll" id="pvSmallScroll"></div>
                </div>
                <span class="pv-s-next"></span>
            </div>
        </div>
        <div></div>
    </div>

  </div>




  <div id="footer">
     ©2017 20170331170544
  </div>




<script src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="assets/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="assets/uniform/jquery.uniform.min.js"></script>
<script type="text/javascript" src="js/layer/layer.js"></script>
<script type="text/javascript" src="js/laydate/laydate.js"></script>
<script type="text/javascript" src="js/laypage/laypage.js"></script>
<script type="text/javascript" src="js/viewer-jquery.min.js"></script>
<script src="js/jquery.scrollto.min.js"></script>
<!--common script for all pages-->
<script src="js/common-scripts.js"></script>
<script>

    // 图片状态下拉切换
    $('.pic-stage-on').click(function() {
        $(this).next('.pic-stage-ul').toggle();
        return false;
    })
    // 关闭图片状态下拉
    $(document).click(function() {
        $('.pic-stage-ul').hide();
    })
    // 选中切换状态
    $('.pic-stage-ul li').click(function() {
        
        var _this = $(this);
        var layerDel = layer.confirm('确定修改？', {
            shadeClose: true,
            btn: ['确定','取消'] //按钮
          }, function(){
              _this.parents('.pic-stage-w').find('.pic-stage-on').attr('dataType', _this.data('stage'))
              _this.parents('.pic-stage-w').find('.picStage').text(_this.text());
              $('.pic-stage-ul').hide();
              layer.close(layerDel);

          }, function(){
          });
          return false;
    })


    $('.untreated-pic-ul').on('click', '.img-label', function() {
        $('.view-pic-mask').show();
    })

    $('.view-pic-clons').click(function() {
        $('.view-pic-mask').hide();
    })
    
    $('.img-label').click(viewPicFn);


    function viewPicFn() {

      $('.img-label').each(function() {
          console.log($(this).prop('src'));
          console.log($(this).prop('id'));
      })

      var curId = '05';// 当前大图的id
      var curImg = ''; // 当前大图对应小图的选中状态
      var imgIndex; // 当前大图对应的小图的索引

      // 所有的小图
      var imgList = [{
          imgSrc : 'img/img-list01.jpg',
          imgId : '01'
      },{
          imgSrc : 'img/zoomFullScreen.jpg',
          imgId : '02'
      },{
          imgSrc : 'img/img-list01.jpg',
          imgId : '03'
      },{
          imgSrc : 'img/zoomFullScreen.jpg',
          imgId : '04'
      },{
          imgSrc : 'img/img-list01.jpg',
          imgId : '05'
      },{
          imgSrc : 'img/zoomFullScreen.jpg',
          imgId : '06'
      },{
          imgSrc : 'img/img-list01.jpg',
          imgId : '07'
      },{
          imgSrc : 'img/zoomFullScreen.jpg',
          imgId : '08'
      },{
          imgSrc : 'img/img-list01.jpg',
          imgId : '09'
      },{
          imgSrc : 'img/zoomFullScreen.jpg',
          imgId : '10'
      },{
          imgSrc : 'img/img-list01.jpg',
          imgId : '11'
      },{
          imgSrc : 'img/zoomFullScreen.jpg',
          imgId : '12'
      },{
          imgSrc : 'img/img-list01.jpg',
          imgId : '13'
      },{
          imgSrc : 'img/zoomFullScreen.jpg',
          imgId : '14'
      },{
          imgSrc : 'img/img-list01.jpg',
          imgId : '15'
      },{
          imgSrc : 'img/zoomFullScreen.jpg',
          imgId : '16'
      }];


      var smallImg = []; // 将小图的信息嵌入对应的html放到对应的容器
      $.each(imgList,function(){
          if(this.imgId == curId){
              curImg = 'pv-s-on';
          }else{
              curImg = '';
          }
          smallImg.push('<div class="s-img-w ' + curImg + '"><img id="' + this.imgId + '" src="' + this.imgSrc +'" /></div>')
      })
      $('#pvSmallScroll').append(smallImg.join(''));
      var pvSmallImg = $('#pvSmallScroll .s-img-w');
      var pvSmallImgLength = pvSmallImg.length;
      var pvScrollW = 0;
      if(pvSmallImg.length > 7){
          pvScrollW = pvSmallImgLength * 56;
          $('#pvSmallScroll').width(pvScrollW + 'px');
      }

      imgIndex = $('.s-img-w').index($('.pv-s-on'));
      if(imgIndex == 0){
          $('#pvPrev').hide();
      }else{
          $('#pvPrev').show();
      }

      if(imgIndex == pvSmallImgLength-1){
          $('#pvNext').hide();
      }else{
          $('#pvNext').show();
      }
      
      $('#pvSmallScroll .s-img-w').click(function(){
          imgIndex = pvSmallImg.index($(this));
          if(pvSmallImgLength > 7){
              if(imgIndex <= 3){
                  $('.pv-s-prev').hide();
              }else{
                  $('.pv-s-prev').show();
              }
              if(imgIndex >= pvSmallImgLength-4){
                  $('.pv-s-next').hide();
              }else{
                  $('.pv-s-next').show();
              }
          }else{
              $('.pv-s-prev').hide();
              $('.pv-s-next').hide();
          }

          if(imgIndex == 0){
              $('#pvPrev').hide();
          }else{
              $('#pvPrev').show();
          }

          if(imgIndex == pvSmallImgLength-1){
              $('#pvNext').hide();
          }else{
              $('#pvNext').show();
          }


          pvSmallImg.removeClass('pv-s-on');
          $(this).addClass('pv-s-on');
          $('#pvSmallScroll').animate({
              'left' : (3 - imgIndex) * 56 + 'px'
          })
          $('#openBigImg').attr('src',$(this).find('img')[0].src);
      })
      pvSmallImg.removeClass('pv-s-on').eq(imgIndex).addClass('pv-s-on');
      if(pvSmallImgLength > 7){
          if(imgIndex <= 3){
              $('.pv-s-prev').hide();
          }else{
              $('.pv-s-prev').show();
          }
          if(imgIndex >= pvSmallImgLength-4){
              $('.pv-s-next').hide();
          }else{
              $('.pv-s-next').show();
          }
      }else{
          $('.pv-s-prev').hide();
          $('.pv-s-next').hide();
      }
      $('#pvSmallScroll').animate({
          'left' : (3 - imgIndex) * 56 + 'px'
      })


      // 小图上3个
      $('.pv-s-prev').unbind().click(function(){
          if(parseInt($('#pvSmallScroll').css('left')) <= -168){
              $(this).show();
              $('#pvSmallScroll').animate({
                  'left' : '+=168px'
              })
          }else{
              $(this).hide();
              $('#pvSmallScroll').animate({
                  'left' : 0
              })
          }
          $('.pv-s-next').show();
      })

      // 小图下3个
      $('.pv-s-next').unbind().click(function(){
          if(parseInt($('#pvSmallScroll').css('left')) > 560 - pvScrollW){
              $(this).show();
              $('#pvSmallScroll').animate({
                  'left' : '-=168px'
              })
          }else{
              $(this).hide();
              $('#pvSmallScroll').animate({
                  'left' : 392 - pvScrollW + 'px'
              })
          }
          $('.pv-s-prev').show();
      })



      // 大图上一张
      $('#pvPrev').unbind().click(function(){
          prevImgFn();
          return false;
      })
      // 大图下一张
      $('#pvNext').unbind().click(function(){
          nextImgFn();
          return false;
      })


      // 键盘绑定
      document.onkeydown = function(event){
          var e = event || window.event;
          if(e && e.keyCode==37){ // 按 <--
             prevImgFn();
          }
          if(e && e.keyCode==39){ // 按 -->
             nextImgFn();
          }            
      }; 
      function prevImgFn(){
          if($('.pv-s-on').prev('.s-img-w').length > 0){
              $('.pv-s-on').prev('.s-img-w').click();
          }
      }
      function nextImgFn(){
          if($('.pv-s-on').next('.s-img-w').length > 0){
            $('.pv-s-on').next('.s-img-w').click();
          }
      }
    }
   

</script>
</body>
</html>
